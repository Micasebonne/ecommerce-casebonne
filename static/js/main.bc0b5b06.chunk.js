(this.webpackJsonpdesafio1=this.webpackJsonpdesafio1||[]).push([[0],{24:function(e,t,c){},54:function(e,t,c){},64:function(e,t,c){"use strict";c.r(t);var n=c(5),a=c.n(n),r=c(40),s=c.n(r),i=(c(54),c(24),c(55),c(13)),o=c(11),l=c(73),j=c(46),d=c(14),b=c(12),u=c(3),m=Object(n.createContext)(),O=function(e){var t=e.children,c=Object(n.useState)([]),a=Object(b.a)(c,2),r=a[0],s=a[1];var i=function(e){var t=r.map((function(e){return e.idItem})).indexOf(e);return r[t].cantItem*r[t].priceItem},o=function(){return r.map((function(e){return i(e.idItem)})).reduce((function(e,t){return e+t}))},l=function(){return.21*o()},j=function(){return(.2*(o()+l())).toFixed(2)};return Object(u.jsx)(m.Provider,{value:{cartList:r,addItem:function(e,t){var c=r.find((function(t){return t.idItem===e.id}));void 0===c?s([].concat(Object(d.a)(r),[{idItem:e.id,imgItem:e.img,nameItem:e.title,priceItem:e.price,cantItem:t}])):c.cantItem+=t},clear:function(){s([])},removeItem:function(e){var t=r.filter((function(t){return t.idItem!==e}));s(t)},totalItems:i,subtotalItems:o,cantidadItems:function(){return r.map((function(e){return e.cantItem})).reduce((function(e,t){return e+t}),0)},sumaIva:l,descuento:j,totalCompra:function(){return o()+l()-j()},dateAndHour:function(){var e=new Date,t=e.getDate()+"-"+(e.getMonth()+1)+"-"+e.getFullYear()+" "+(e.getHours()+":"+e.getMinutes()+":"+e.getSeconds());return t}},children:t})},x=function(){var e=Object(n.useContext)(m);return Object(u.jsx)(i.b,{to:"/cart",style:{color:"white"},children:Object(u.jsxs)(l.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},badgeContent:e.cantidadItems(),color:"secondary",overlap:"circular",children:[" ",Object(u.jsx)(j.a,{})," "]})})};var h=function(){return Object(u.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark",children:[Object(u.jsxs)("div",{className:"container-fluid",children:[Object(u.jsx)(i.b,{to:"/",style:{textDecoration:"none"},className:"navbar-brand",children:"der Zauberladen"}),Object(u.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(u.jsx)("span",{className:"navbar-toggler-icon"})}),Object(u.jsx)("div",{className:"collapse navbar-collapse justify-content-center",id:"navbarNav",children:Object(u.jsxs)("ul",{className:"navbar-nav",children:[Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(i.b,{to:"/",style:{textDecoration:"none"},className:"nav-link","aria-current":"page",children:"Inicio"})}),Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(i.b,{to:"/category/sw1LqCOZTucSCl3AMMKB",style:{textDecoration:"none"},className:"nav-link",children:"Pociones"})}),Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(i.b,{to:"/category/yZxh6cb8uG0gTplFpEEa",style:{textDecoration:"none"},className:"nav-link",children:"Varitas"})}),Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(i.b,{to:"/category/2KASdxodk71N8pe2B2j7",style:{textDecoration:"none"},className:"nav-link",children:"Escobas"})}),Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(i.b,{to:"/category/l1WbHMcGk8s0tr2LrHKb",style:{textDecoration:"none"},className:"nav-link",children:"Golosinas"})}),Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(i.b,{to:"/category/TY4d7NcEWR1tqwW3moTs",style:{textDecoration:"none"},className:"nav-link",children:"Mascotas"})})]})})]}),Object(u.jsx)("div",{className:"cartWidget",children:Object(u.jsx)(x,{})})]})},p=function(e){var t=e.item;return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("div",{className:"itemContainer",children:Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{className:"itemImg",children:Object(u.jsx)("img",{src:t.img,alt:t.title})}),Object(u.jsxs)("div",{className:"itemInfo",children:[Object(u.jsx)("h3",{children:t.title}),Object(u.jsx)("p",{children:t.des}),Object(u.jsxs)("h4",{children:["$ ",t.price]}),Object(u.jsx)(i.b,{to:"/item/".concat(t.id),children:Object(u.jsx)("button",{children:"Ver detalles"})})]})]},t.id)})})},v=function(e){var t=e.items;return Object(u.jsx)(u.Fragment,{children:t.length>0?Object(u.jsx)("ul",{className:"cardsItems",children:t.map((function(e){return Object(u.jsx)(p,{item:e,id:e.id},e.id)}))}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("br",{}),Object(u.jsx)("p",{className:"spinner",children:"Cargando..."}),Object(u.jsxs)("div",{className:"d-flex justify-content-center",children:[Object(u.jsx)("div",{className:"spinner-grow text-secondary",role:"status",children:Object(u.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),Object(u.jsx)("div",{className:"spinner-grow text-secondary",role:"status",children:Object(u.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),Object(u.jsx)("div",{className:"spinner-grow text-secondary",role:"status",children:Object(u.jsx)("span",{className:"visually-hidden",children:"Loading..."})})]})]})})},f=c(0),g=c.n(f),N=c(38),I=c(4),y=c(45),C=c(16),k=Object(y.a)({apiKey:"AIzaSyDUyXdQgDEZcAHJ8Pl401Dq-bvG6nQ_o2Y",authDomain:"derzauberladen-e189a.firebaseapp.com",projectId:"derzauberladen-e189a",storageBucket:"derzauberladen-e189a.appspot.com",messagingSenderId:"986458904069",appId:"1:986458904069:web:83bdb81e782a62c06dae6c"}),T=Object(C.d)(k),w=c(27),D=function(){var e=Object(I.a)(g.a.mark((function e(t){var c,n,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t?Object(C.g)(Object(C.a)(T,"data"),Object(C.j)("categoryId","==",t)):Object(C.g)(Object(C.a)(T,"data"),Object(C.f)("title")),e.next=3,Object(C.c)(c);case 3:return n=e.sent,a=n.docs.map((function(e){return Object(N.a)({id:e.id},e.data())})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=D,L=function(){var e=Object(I.a)(g.a.mark((function e(t){var c,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(w.b)(T,"data",t),e.next=3,Object(w.c)(c);case 3:if(!(n=e.sent).exists()){e.next=8;break}return e.abrupt("return",Object(N.a)({id:t},n.data()));case 8:console.log("No such document!");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(n.useState)([]),t=Object(b.a)(e,2),c=t[0],a=t[1],r=Object(o.g)().idCategory;return Object(n.useEffect)((function(){S(r).then((function(e){return a(e)})).catch((function(e){return console.log(e)}))}),[r]),Object(n.useEffect)((function(){return function(){a([])}}),[]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h1",{className:"estilosTitulos tituloTienda",children:"Der Zauberladen"}),Object(u.jsx)("h2",{className:"estilosTitulos subtituloPrincipal",children:"Todo lo que en el mundo m\xe1gico se necesita"}),Object(u.jsx)(v,{items:c})]})},A=function(e){var t=e.stock,c=void 0===t?0:t,a=e.initial,r=void 0===a?1:a,s=e.onAdd,i=Object(n.useState)(0),o=Object(b.a)(i,2),l=o[0],j=o[1];Object(n.useEffect)((function(){j(r)}),[r]);return Object(u.jsxs)("div",{className:"contenedorBoton",children:[Object(u.jsx)("button",{onClick:function(){l>r&&j(l-1)},className:"botonCount",children:"-"}),Object(u.jsx)("p",{children:l}),Object(u.jsx)("button",{onClick:function(){l<c&&j(l+1)},className:"botonCount",children:"+"}),l?Object(u.jsx)("button",{className:"botonCount",onClick:function(){return s(l)},children:"Agregar al carrito"}):Object(u.jsx)("button",{className:"botonInactivo",disabled:!0,children:"Agregar al carrito"})]})},B=function(e){var t=e.item,c=Object(n.useState)(0),a=Object(b.a)(c,2),r=a[0],s=a[1],o=Object(n.useContext)(m);return Object(u.jsx)(u.Fragment,{children:t&&t.img?Object(u.jsx)("div",{className:"containerItemDetail",children:Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{className:"imgItemDetail",children:[Object(u.jsx)("img",{src:t.img,alt:t.title}),Object(u.jsxs)("div",{className:"itemDetail",children:[Object(u.jsx)("h3",{children:t.title}),Object(u.jsx)("p",{children:t.description}),Object(u.jsxs)("h4",{children:["Precio: $ ",t.price]}),Object(u.jsxs)("p",{children:["Stock: ",t.stock]})]})]}),0===r?Object(u.jsx)("div",{className:"containerItemCount",children:Object(u.jsx)(A,{stock:t.stock,initial:r,onAdd:function(e){alert("Se a\xf1adieron ".concat(e," Item(s) al carrito")),s(e),o.addItem(t,e)}},t.id)}):Object(u.jsx)("div",{className:"contenedorBoton",children:Object(u.jsx)(i.b,{to:"/cart",children:Object(u.jsx)("button",{className:"botonCheckout",children:"Checkout"})})})]},t.id)}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("br",{}),Object(u.jsx)("p",{className:"spinner",children:"Cargando..."}),Object(u.jsxs)("div",{className:"d-flex justify-content-center",children:[Object(u.jsx)("div",{className:"spinner-grow text-danger",role:"status",children:Object(u.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),Object(u.jsx)("div",{className:"spinner-grow text-danger",role:"status",children:Object(u.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),Object(u.jsx)("div",{className:"spinner-grow text-danger",role:"status",children:Object(u.jsx)("span",{className:"visually-hidden",children:"Loading..."})})]})]})})},E=function(){var e=Object(n.useState)([]),t=Object(b.a)(e,2),c=t[0],a=t[1],r=Object(o.g)().idItem;return Object(n.useEffect)((function(){L(r).then((function(e){return a(e)})).catch((function(e){return console.log(e)}))}),[r]),Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(B,{item:c})})},P=function(){var e=Object(n.useContext)(m);return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h1",{className:"cartText",children:"Tu carrito de compras"}),e.cartList.length>0?Object(u.jsxs)("div",{className:"contenedorBotonCart",children:[Object(u.jsx)(i.b,{to:"/",children:Object(u.jsx)("button",{className:"botonCount",children:"Continuar comprando"})}),Object(u.jsx)("button",{onClick:e.clear,className:"botonCount",children:"Vaciar carrito"})]}):Object(u.jsx)("p",{className:"cartSubText",children:"\xa1Tu carrito se encuentra vac\xedo! :( "}),e.cartList.length>0?e.cartList.map((function(t){return Object(u.jsxs)("div",{className:"cartContainer",children:[Object(u.jsx)("div",{className:"imgCart",children:Object(u.jsx)("img",{src:t.imgItem,title:t.imgItem,alt:t.imgItem})}),Object(u.jsxs)("div",{className:"cartDetail",children:[Object(u.jsxs)("p",{className:"cartSubText",children:["Producto: ",t.nameItem]}),Object(u.jsx)("button",{onClick:function(){return e.removeItem(t.idItem)},className:"botonCount",children:"Borrar producto"})]}),Object(u.jsxs)("div",{className:"precioCart",children:[Object(u.jsxs)("p",{className:"cartSubText",children:[t.cantItem," item(s) / $ ",t.priceItem," cada uno"]}),Object(u.jsxs)("p",{className:"cartSubText",children:["Total: $ ",e.totalItems(t.idItem)]})]})]},t.idItem)})):Object(u.jsx)("div",{className:"contenedorBotonCart",children:Object(u.jsx)(i.b,{to:"/",children:Object(u.jsx)("button",{className:"botonCount",children:"Ir a comprar"})})}),e.cartList.length>0&&Object(u.jsxs)("div",{className:"containerCompra",children:[Object(u.jsx)("h2",{className:"cartText",children:"Resumen de tu compra"}),Object(u.jsxs)("p",{className:"compraText",children:[Object(u.jsx)("b",{children:"Subtotal:"})," $ ",e.subtotalItems()]}),Object(u.jsxs)("p",{className:"compraText",children:[Object(u.jsx)("b",{children:"Impuesto IVA (21%):"})," $ ",e.sumaIva()," "]}),Object(u.jsxs)("p",{className:"compraText",children:[Object(u.jsx)("b",{children:"Promociones y descuentos:"})," -$ ",e.descuento()]}),Object(u.jsx)("hr",{}),Object(u.jsxs)("h3",{className:"compraText",style:{textDecoration:"underline"},children:[Object(u.jsx)("b",{children:"Compra total:"})," $ ",e.totalCompra(),"  "]}),Object(u.jsx)("div",{className:"contenedorBoton",children:Object(u.jsx)("button",{className:"botonCount",onClick:function(){var t={buyer:{name:"Ramiro Rodriguez",email:"rami22@hotmail.com",phone:"1576846352"},items:e.cartList.map((function(e){return{id:e.idItem,title:e.nameItem,price:e.priceItem,cantidad:e.cantItem}})),fecha:e.dateAndHour(),total:e.totalCompra()};console.log(t);var c=function(){var e=Object(I.a)(g.a.mark((function e(){var c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(C.b)(Object(C.a)(T,"orders")),e.next=3,Object(C.h)(c,t);case 3:return e.abrupt("return",c);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();c().then((function(e){return alert("Su n\xfamero de orden de compra es "+e.id+". Por consola ver\xe1 los detalles de la misma. \xa1Gracias por su visita!")})).catch((function(e){return console.log(e)})),e.cartList.forEach(function(){var e=Object(I.a)(g.a.mark((function e(t){var c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(C.b)(T,"data",t.idItem),e.next=3,Object(C.i)(c,{stock:Object(C.e)(-t.cantItem)});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.clear()},children:"Finalizar compra"})})]})]})};var $=function(){return Object(u.jsx)(O,{children:Object(u.jsxs)(i.a,{children:[Object(u.jsx)(h,{}),Object(u.jsxs)(o.c,{children:[Object(u.jsx)(o.a,{path:"/",element:Object(u.jsx)(F,{})}),Object(u.jsx)(o.a,{path:"/category/:idCategory",element:Object(u.jsx)(F,{})}),Object(u.jsx)(o.a,{path:"/item/:idItem",element:Object(u.jsx)(E,{})}),Object(u.jsx)(o.a,{path:"/cart",element:Object(u.jsx)(P,{})})]})]})})},z=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,74)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;c(e),n(e),a(e),r(e),s(e)}))};s.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)($,{})}),document.getElementById("root")),z()}},[[64,1,2]]]);
//# sourceMappingURL=main.bc0b5b06.chunk.js.map